<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>تذكرة موعد #{{appointmentId}}</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@500;700;900&display=swap');

    :root {
      /* High contrast black & white is best for thermal */
      --text: #000000;
      --border: #333333;
    }

    body {
      font-family: 'Cairo', sans-serif;
      font-size: 13px; /* Slightly larger base font for legibility */
      color: var(--text);
      line-height: 1.4;
      margin: 0;
      padding: 0;
      background: white;
      -webkit-print-color-adjust: exact;
    }

    * { box-sizing: border-box; }

    /* Container for 80mm thermal receipt (Approx 300px width) */
    .receipt-container {
      width: 100%;
      max-width: 320px;
      margin: 0 auto;
      padding: 20px 15px;
      background: #fff;
    }

    /* 1. Header */
    .header {
      text-align: center;
      margin-bottom: 20px;
    }

    .hospital-title {
      font-size: 20px;
      font-weight: 900;
      margin: 0 0 5px 0;
      text-transform: uppercase;
      letter-spacing: -0.5px;
    }

    .hospital-contact {
      font-size: 11px;
      margin: 0;
      font-weight: 500;
      color: #333;
    }

    /* Separator lines for thermal */
    .divider {
      border-top: 1px dashed var(--border);
      margin: 15px 0;
    }
    
    .divider-solid {
      border-top: 2px solid var(--text);
      margin: 20px 0;
    }

    /* 2. Queue Section (The most important part) */
    .queue-section {
      text-align: center;
      margin: 20px 0;
    }

    .queue-label {
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .queue-number {
      font-size: 72px; /* Massive font for the screen */
      font-weight: 900;
      line-height: 1;
      margin: 10px 0;
      letter-spacing: -2px;
    }

    .queue-dept {
      font-size: 18px;
      font-weight: 900;
      border: 2px solid var(--text);
      border-radius: 4px;
      padding: 4px 10px;
      display: inline-block;
      margin-top: 5px;
    }

    /* 3. Patient & Appointment Details */
    .details-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    .details-table td {
      padding: 6px 0;
      vertical-align: top;
    }

    .col-label {
      font-weight: 500;
      width: 35%;
      color: #222;
      font-size: 11px;
    }

    .col-value {
      font-weight: 900;
      width: 65%;
      text-align: left;
      font-size: 13px;
    }

    .appointment-meta {
      text-align: center;
      margin-top: 15px;
      padding: 10px;
      background: #f8f9fa; /* Slight shading */
      border: 1px solid var(--border);
      border-radius: 4px;
    }

    .meta-date { font-weight: 900; font-size: 14px; }
    .meta-time { font-weight: 700; font-size: 14px; margin-top: 5px; }

    /* 4. Footer & QR */
    .footer {
      text-align: center;
      margin-top: 20px;
    }

    .notice {
      font-size: 12px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .wish {
      font-size: 11px;
      font-weight: 500;
      color: #333;
    }

    .qr-container {
      margin-top: 15px;
      display: flex;
      justify-content: center;
    }

    .qr-image {
      width: 90px;
      height: 90px;
    }

    .system-info {
      font-size: 9px;
      margin-top: 15px;
      font-family: monospace;
      color: #444;
    }

  </style>
</head>
<body>

  <div class="receipt-container">
    
    <!-- 1. Header -->
    <div class="header">
      {{#if printHeaderFooter}}
        <h1 class="hospital-title">{{hospitalName}}</h1>
        <p class="hospital-contact">{{address}}</p>
      {{else}}
        <h1 class="hospital-title">تذكرة حجز</h1>
      {{/if}}
      
      {{!-- <div class="system-info" style="margin-top: 5px; font-size: 11px; font-weight: 700;">
        موعد رقم: #{{appointmentId}}
      </div> --}}
    </div>

    <!-- 2. Queue Number (Hero Element) -->
    <div class="divider-solid"></div>
    <div class="queue-section">
      <div class="queue-label">رقم الدور (Queue No)</div>
      <div class="queue-number">{{queueNumber}}</div>
      <div class="queue-dept">{{departmentName}}</div>
    </div>
    <div class="divider-solid"></div>

    <!-- 3. Details -->
    <table class="details-table">
      <tr>
        <td class="col-label">المريض :</td>
        <td class="col-value">{{patientName}}</td>
      </tr>
      <tr>
        <td class="col-label">رقم الملف :</td>
        <td class="col-value" style="font-family: monospace; font-size: 14px;">{{mrn}}</td>
      </tr>
      <tr>
        <td class="col-label">الطبيب :</td>
        <td class="col-value">{{doctorName}}</td>
      </tr>
      
      {{#if (gt price 0)}}
      <tr>
        <td class="col-label">رسوم الكشف :</td>
        <td class="col-value">{{price}} LYD</td>
      </tr>
      {{/if}}
    </table>

    <div class="appointment-meta">
      <div class="meta-date">{{formatDate date}}</div>
      <div class="meta-time">{{time}}</div>
    </div>

    <!-- 4. Footer & QR -->
    <div class="divider"></div>
    <div class="footer">
      <div class="notice">يرجى الحضور قبل الموعد بـ 15 دقيقة</div>
      <div class="wish">مع تمنياتنا لكم بالشفاء العاجل</div>
      
      <div class="qr-container">
        {{#if qrCode}}
          <img src="{{qrCode}}" class="qr-image" alt="QR Code" />
        {{/if}}
      </div>
      
      <div class="system-info">
        Printed: {{printDate}} | Saraya ERP
      </div>
    </div>

  </div> <!-- End Receipt Container -->

</body>
</html>

{{!-- <html lang='ar' dir='rtl'>
  <head>
    <meta charset='UTF-8' />
    <title>تذكرة موعد #{{appointmentId}}</title>
    <link
      href='https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap'
      rel='stylesheet'
    />
    <style>
      :root {
        --primary: #0284c7; /* Sky 600 */
        --primary-dark: #0369a1; /* Sky 700 */
        --accent: #10b981; /* Emerald 500 */
        --text-dark: #1e293b;
        --text-light: #64748b;
        --bg-light: #f8fafc;
      }

      body {
        font-family: 'Tajawal', sans-serif;
        margin: 0;
        padding: 20px;
        color: var(--text-dark);
        background-color: #fff;
        -webkit-print-color-adjust: exact;
      }

      .ticket-container {
        max-width: 450px;
        margin: 0 auto;
        border: 2px dashed #cbd5e1;
        border-radius: 12px;
        padding: 20px;
        position: relative;
        background: white;
      }

      .cut-line {
        border-top: 2px dashed #94a3b8;
        margin: 20px 0;
        position: relative;
      }

      .cut-line::after {
        content: '✂';
        position: absolute;
        top: -12px;
        right: -15px;
        font-size: 16px;
        color: #94a3b8;
      }

      /* Header */
      .header {
        text-align: center;
        margin-bottom: 15px;
      }
      .hospital-logo {
        width: 60px;
        height: 60px;
        margin-bottom: 5px;
        object-fit: contain;
      }
      .hospital-name {
        font-size: 16px;
        font-weight: 800;
        color: var(--primary-dark);
        margin: 0;
      }
      .ticket-title {
        font-size: 12px;
        color: var(--text-light);
        margin-top: 2px;
        font-weight: 500;
      }

      /* Queue Number Box */
      .queue-box {
        text-align: center;
        margin: 15px 0;
        padding: 10px;
        background: linear-gradient(135deg, #0ea5e910 0%, #e0f2fe 100%);
        border-radius: 10px;
        border: 1px solid #bae6fd;
      }
      .queue-label {
        font-size: 11px;
        text-transform: uppercase;
        color: var(--primary);
        font-weight: 700;
        letter-spacing: 1px;
      }
      .queue-number {
        font-size: 42px;
        font-weight: 900;
        color: var(--primary-dark);
        line-height: 1;
        margin: 5px 0;
      }
      .queue-dept {
        font-size: 13px;
        font-weight: 600;
        color: var(--text-dark);
      }

      /* Details Grid */
      .details-grid {
        display: grid;
        grid-template-columns: 80px 1fr;
        gap: 8px;
        font-size: 12px;
        margin-bottom: 15px;
        padding: 0 10px;
      }
      .label {
        color: var(--text-light);
        font-weight: 500;
      }
      .value {
        color: var(--text-dark);
        font-weight: 700;
      }

      .time-box {
        display: flex;
        justify-content: space-between;
        background: var(--bg-light);
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 15px;
      }
      .time-item {
        text-align: center;
        flex: 1;
      }
      .time-label {
        font-size: 10px;
        color: var(--text-light);
        display: block;
      }
      .time-value {
        font-size: 14px;
        font-weight: 800;
        color: var(--text-dark);
      }

      /* QR & Footer */
      .footer {
        text-align: center;
        margin-top: 15px;
        border-top: 1px solid #e2e8f0;
        padding-top: 10px;
      }
      .qr-container {
        display: flex;
        justify-content: center;
        margin-bottom: 10px;
      }
      .qr-img {
        width: 70px;
        height: 70px;
        border: 4px solid white;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .note {
        font-size: 10px;
        color: var(--text-light);
        font-style: italic;
      }
      .powered-by {
        font-size: 8px;
        color: #cbd5e1;
        margin-top: 5px;
        font-family: monospace;
      }
    </style>
  </head>
  <body>

    <div class='ticket-container'>
      <div class='header'>
        <!-- Optional Logo Placeholder -->
        <!-- <img src="logo.png" class="hospital-logo" /> -->
        <h1 class='hospital-name'>{{hospitalName}}</h1>
        <div class='ticket-title'>تذكرة مراجعة العيادات الخارجية</div>
      </div>

      <div class='queue-box'>
        <div class='queue-label'>رقم الدور (Queue No)</div>
        <div class='queue-number'>{{queueNumber}}</div>
        <div class='queue-dept'>{{departmentName}}</div>
      </div>

      <div class='time-box'>
        <div class='time-item'>
          <span class='time-label'>التاريخ</span>
          <span class='time-value'>{{formatDate date}}</span>
        </div>
        <div style='width:1px; background:#e2e8f0; margin:0 5px;'></div>
        <div class='time-item'>
          <span class='time-label'>الوقت المتوقع</span>
          <span class='time-value'>{{time}}</span>
        </div>
      </div>

      <div class='details-grid'>
        <div class='label'>اسم المريض:</div>
        <div class='value'>{{patientName}}</div>

        <div class='label'>رقم الملف:</div>
        <div class='value' style='font-family: monospace;'>{{mrn}}</div>

        <div class='label'>الطبيب:</div>
        <div class='value'>{{doctorName}}</div>

        {{#if (gt price 0)}}
          <div class='label'>رسوم الكشف:</div>
          <div class='value' style='color: var(--accent);'>{{price}} د.ل</div>
        {{/if}}
      </div>

      <div class='footer'>
        <div class='qr-container'>
          {{#if qrCode}}
            <img src='{{qrCode}}' class='qr-img' />
          {{/if}}
        </div>
        <div class='note'>يرجى الانتظار في الصالة حتى ظهور الرقم على الشاشة.</div>
        <div class='note'>نتمنى لكم الشفاء العاجل.</div>
        <div class='powered-by'>Saraya ERP System</div>
      </div>
    </div>

  </body>
</html> --}}

{{!-- <html lang='ar' dir='rtl'>
  <head>
    <meta charset='UTF-8' />
    <title>إيصال حجز موعد #{{appointmentId}}</title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 12px;
        color: #1f2937;
        line-height: 1.5;
        margin: 0;
        padding: 0;
      }

      .container {
        width: 100%;
        margin: 0 auto;
        padding: 20px;
        max-width: 400px; /* إيصال حراري أو صغير */
        border: 1px solid #e2e8f0;
      }

      .header {
        text-align: center;
        border-bottom: 2px solid #0f766e;
        padding-bottom: 10px;
        margin-bottom: 20px;
      }

      .hospital-name {
        color: #0f766e;
        font-size: 18px;
        margin: 0 0 5px 0;
      }

      .title {
        font-size: 16px;
        font-weight: bold;
        text-transform: uppercase;
        margin-top: 10px;
      }

      .queue-box {
        text-align: center;
        margin: 20px 0;
        padding: 15px;
        background-color: #f0fdfa;
        border: 2px dashed #0f766e;
        border-radius: 8px;
      }

      .queue-label {
        font-size: 14px;
        color: #555;
        display: block;
        margin-bottom: 5px;
      }

      .queue-number {
        font-size: 48px;
        font-weight: 800;
        color: #0f766e;
        line-height: 1;
      }

      .details-table {
        width: 100%;
        margin-bottom: 20px;
      }

      .details-table td {
        padding: 5px 0;
        border-bottom: 1px solid #f1f5f9;
      }

      .label {
        color: #64748b;
        font-weight: bold;
        width: 100px;
      }

      .value {
        color: #0f172a;
        font-weight: 600;
      }

      .footer {
        text-align: center;
        font-size: 10px;
        color: #94a3b8;
        margin-top: 20px;
        border-top: 1px solid #e2e8f0;
        padding-top: 10px;
      }

      .qr-code {
        margin-top: 15px;
        text-align: center;
      }
      
      .qr-img {
        width: 80px;
        height: 80px;
      }
    </style>
  </head>
  <body>
    <!-- تصميم مناسب للطابعات الحرارية (Thermal Printer Friendly) -->
    
    {{#if printHeaderFooter}}
    <div class='header'>
      <h1 class='hospital-name'>{{hospitalName}}</h1>
      <div>{{address}}</div>
      <div class='title'>إيصال حجز موعد<br>Appointment Ticket</div>
    </div>
    {{else}}
    <div style="height: 60px;"></div>
    <div style="text-align: center; font-weight: bold; margin-bottom: 20px; font-size: 16px;">
        إيصال حجز موعد
    </div>
    {{/if}}

    <div class="queue-box">
      <span class="queue-label">رقم الدور / Queue No</span>
      <span class="queue-number">{{queueNumber}}</span>
    </div>

    <table class="details-table">
      <tr>
        <td class="label">المريض:</td>
        <td class="value">{{patientName}}</td>
      </tr>
      <tr>
        <td class="label">رقم الملف:</td>
        <td class="value">{{mrn}}</td>
      </tr>
      <tr>
        <td class="label">العيادة/القسم:</td>
        <td class="value">{{departmentName}}</td>
      </tr>
      <tr>
        <td class="label">الطبيب:</td>
        <td class="value">{{doctorName}}</td>
      </tr>
      <tr>
        <td class="label">التاريخ:</td>
        <td class="value">{{formatDate date}}</td>
      </tr>
      <tr>
        <td class="label">الوقت:</td>
        <td class="value">{{time}}</td>
      </tr>
      <tr>
        <td class="label" style="color: #059669;">قيمة الكشف:</td>
        <td class="value" style="color: #059669; font-size: 14px;">{{price}}</td>
      </tr>
    </table>

    <div class='footer'>
      <div style="font-weight: bold;">يرجى الحضور قبل الموعد بـ 15 دقيقة</div>
      <div>نظام السرايا الطبي - Saraya ERP</div>
      <div>{{printDate}}</div>
      
      <div class='qr-code'>
        {{#if qrCode}}
          <img src='{{qrCode}}' class='qr-img' />
        {{/if}}
      </div>
    </div>

  </body>
</html> --}}